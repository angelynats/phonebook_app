{"version":3,"sources":["utils/hoc/withAuthRedirect.js","utils/validation.js","components/SignupForm/SignupForm.module.css","pages/SignupPage/SignupPage.module.css","components/SignupForm/SignupForm.js","pages/SignupPage/SignupPage.js"],"names":["withAuthRedirect","BaseComponent","authenticated","useSelector","state","sessionSelectors","history","useHistory","location","useLocation","useEffect","replace","from","rulesSignup","name","email","password","rulesLogin","rulesContact","number","messages","required","field","module","exports","SignupForm","useState","setName","setEmail","setPassword","errors","setErrors","dispatch","useDispatch","onSubmit","e","preventDefault","validateAll","then","data","sessionOperations","catch","formattedErrors","forEach","error","message","className","styles","form","noValidate","inputs","htmlFor","label","autoFocus","id","type","value","onChange","target","input","button","main","main_signup","header","header_secondary","to","link"],"mappings":"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","file":"static/js/signup-page.6a645530.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport * as sessionSelectors from '../../redux/session/sessionSelectors';\r\n\r\nconst withAuthRedirect = BaseComponent => {\r\n  const WithAuthRedirect = () => {\r\n    const authenticated = useSelector(state =>\r\n      sessionSelectors.isAuthenticated(state),\r\n    );\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n      if (!authenticated) {\r\n        return;\r\n      }\r\n      history.replace('/contacts');\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n      if (!authenticated) {\r\n        return;\r\n      }\r\n      if (location.state && location.state.from) {\r\n        return history.replace(location.state.from);\r\n      }\r\n\r\n      history.replace('/contacts');\r\n    }, [authenticated, history, location.state]);\r\n\r\n    return <BaseComponent />;\r\n  };\r\n\r\n  return WithAuthRedirect;\r\n};\r\n\r\nexport default withAuthRedirect;\r\n","export const rulesSignup = {\r\n  name: 'required|string',\r\n  email: 'required|email',\r\n  password: 'required|string|min:6',\r\n};\r\n\r\nexport const rulesLogin = {\r\n  email: 'required|email',\r\n  password: 'required|string|min:6',\r\n};\r\n\r\nexport const rulesContact = {\r\n  name: 'required|string',\r\n  number: 'required|string|min:8',\r\n};\r\n\r\nexport const messages = {\r\n  required: field => `* ${field} is required`,\r\n  'email.email': '* please enter a valid email address',\r\n  'password.min': '* must be at least 6 characters long',\r\n  'number.min': '* must be at least 8 characters long',\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SignupForm_form__3tVmj\",\"inputs\":\"SignupForm_inputs__C1XTQ\",\"label\":\"SignupForm_label__29a6a\",\"input\":\"SignupForm_input__3Nj-p\",\"error\":\"SignupForm_error__1oxv0\",\"button\":\"SignupForm_button__3Qc7w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"SignupPage_main__7RrZy\",\"main_signup\":\"SignupPage_main_signup__1FuN2\",\"header\":\"SignupPage_header__2We3z\",\"header_secondary\":\"SignupPage_header_secondary__3nYLM\",\"link\":\"SignupPage_link__34HKo\"};","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { validateAll } from 'indicative/validator';\r\nimport { rulesSignup, messages } from '../../utils/validation';\r\n// import PropTypes from 'prop-types';\r\nimport * as sessionOperations from '../../redux/session/sessionOperations';\r\nimport styles from './SignupForm.module.css';\r\n\r\nconst SignupForm = () => {\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errors, setErrors] = useState(null);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    validateAll({ name, email, password }, rulesSignup, messages)\r\n      .then(data => {\r\n        dispatch(sessionOperations.signup(data));\r\n      })\r\n      .catch(errors => {\r\n        const formattedErrors = {};\r\n        errors.forEach(error => (formattedErrors[error.field] = error.message));\r\n        setErrors(formattedErrors);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.form} noValidate>\r\n      <div className={styles.inputs}>\r\n        <label htmlFor=\"name\" className={styles.label}>\r\n          Name\r\n          <input\r\n            autoFocus\r\n            id=\"name\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={name}\r\n            onChange={e => setName(e.target.value)}\r\n            className={styles.input}\r\n          />\r\n          {errors && <span className={styles.error}>{errors.name}</span>}\r\n        </label>\r\n\r\n        <label htmlFor=\"email\" className={styles.label}>\r\n          Email\r\n          <input\r\n            id=\"email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={e => setEmail(e.target.value)}\r\n            className={styles.input}\r\n          />\r\n          {errors && <span className={styles.error}>{errors.email}</span>}\r\n        </label>\r\n\r\n        <label htmlFor=\"password\" className={styles.label}>\r\n          Password\r\n          <input\r\n            required\r\n            id=\"password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            className={styles.input}\r\n          />\r\n          {errors && <span className={styles.error}>{errors.password}</span>}\r\n        </label>\r\n      </div>\r\n      <button type=\"submit\" className={styles.button}>\r\n        SIGN UP\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SignupForm;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport withAuthRedirect from '../../utils/hoc/withAuthRedirect';\r\n\r\nimport SignupForm from '../../components/SignupForm/SignupForm';\r\nimport styles from './SignupPage.module.css';\r\n\r\nconst SignupPage = () => {\r\n  return (\r\n    <main className={styles.main}>\r\n      <div className={styles.main_signup}>\r\n        <h1 className={styles.header}>SIGN UP</h1>\r\n        <SignupForm />\r\n        <p className={styles.header_secondary}>or</p>\r\n        <NavLink to=\"/login\" className={styles.link}>\r\n          LOG IN\r\n        </NavLink>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default withAuthRedirect(SignupPage);\r\n"],"sourceRoot":""}